<!DOCTYPE html>
<html lang="es">
<head> <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Enviar pago</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sf-font@1.0.0/sf-font.min.css">

<style>
:root {
  --purple-ios: #660069;
  --muted: #bdbfc6;
  --pill: #f0eff2;
  --btn-disabled: #d9d5e1;
  --white: #ffffff;
  --font-stack: -apple-system, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
  --name-color: #640085;
  --green-ios: #00d998;
  --green-disabled: rgba(0, 217, 152, 0.25);
}

* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; background: var(--white); }
body {
  font-family: var(--font-stack);
  color: #222;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  font-weight: 400;
}

[contenteditable]:focus { outline: none; }

.topbar {
  background: var(--white);
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
}

.icon { font-size: 20px; opacity: 0.9; cursor: pointer; }
.title { font-size: 18px; font-weight: 500; color: #000; }

.container {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 22px 20px;
}

.card { 
  width: 100%; 
  max-width: 520px; 
  text-align: center; 
  display: flex;
  flex-direction: column;
  align-items: center;
}

.payee-name {
  font-size: 22px;
  font-weight: 400;
  color: var(--name-color);
  margin-top: 12px;
  cursor: text;
}

.payee-number {
  margin-top: 6px;
  color: var(--muted);
  font-size: 14px;
  letter-spacing: 0.3px;
  font-weight: 400;
  cursor: text;
}

.amount-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin: 50px 0;
}

.amount-display {
  position: relative;
  display: inline-block;
}

#bigAmount {
  font-size: 72px;
  font-weight: 400;
  color: var(--purple-ios);
  letter-spacing: -1px;
  cursor: text;
  line-height: 1;
  display: inline-block;
  padding-left: 26px;
}

.currency {
  position: absolute;
  top: 20%;
  left: 0;
  font-size: 28px;
  color: rgba(0,0,0,0.35);
  font-weight: 400;
}

.limit-pill {
  margin-top: 18px;
  background: var(--pill);
  color: #6d6d76;
  padding: 10px 16px;
  border-radius: 20px;
  font-size: 13px;
  text-align: center;
  max-width: 100%;
}

.msg-placeholder {
  margin-top: 16px;
  border-top: 1px solid #eee;
  padding-top: 18px;
  color: var(--muted);
  font-size: 15px;
  font-weight: 400;
  cursor: text;
}

.footer {
  background: var(--white);
  padding: 14px;
  border-top: 1px solid #eee;
  display: flex;
  gap: 12px;
  justify-content: space-between;
}

.btn {
  flex: 1;
  padding: 12px 16px;
  border-radius: 10px;
  font-weight: 500;
  border: 1px solid rgba(0,0,0,0.06);
  cursor: pointer;
  font-size: 15px;
  font-family: var(--font-stack);
  transition: 0.2s;
}

.btn.ghost {
  background: var(--white);
  color: var(--green-ios);
  border: 1.5px solid var(--green-ios);
}

.btn.ghost.disabled {
  background: var(--white);
  color: var(--green-disabled);
  border: 1.5px solid var(--green-disabled);
  cursor: not-allowed;
}

.btn.primary {
  background: var(--green-ios);
  color: var(--white);
  border: 1px solid var(--green-ios);
}

.btn.primary.disabled {
  background: var(--btn-disabled);
  border: 1px solid var(--btn-disabled);
  opacity: 0.7;
  cursor: not-allowed;
}

@media (max-width:420px) {
  #bigAmount { font-size: 58px; padding-left: 22px; }
  .currency { font-size: 22px; }
}

.popup-overlay {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  background: rgba(0,0,0,0.4);
}

.popup {
  background: #ffffff;
  padding: 20px 70px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  min-width: 180px;
}

.loader {
  border: 3px solid #e0e0e0;
  border-top: 3px solid #00d998;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  animation: spin 1.5s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg);}
  100% { transform: rotate(360deg);}
}

.popup-text {
  color: #000;
  font-weight: 600;
  font-size: 16px;
}
</style>
</head>
<body>

<header class="topbar">
  <div class="icon">←</div>
  <div class="title">Yapear a</div>
  <div class="icon">✕</div>
</header>

<main class="container">
  <div class="card">
    <div class="payee-name" id="displayName" contenteditable="true">Nombre y apellido</div>
    <div class="payee-number" id="displayNumber" contenteditable="true">*** *** 000</div>

    <div class="amount-wrap">
      <div class="amount-display">
        <span class="currency">S/</span>
        <div id="bigAmount" contenteditable="true">0</div>
      </div>
      <div class="limit-pill" id="limitText">
        Límite por yapeo S/ 500, límite total por día S/ 950
      </div>
    </div>
  </div>

  <div class="msg-placeholder" id="msgPlaceholder" contenteditable="true">Agregar mensaje</div>
</main>

<footer class="footer">
  <button class="btn ghost disabled" id="otherBanksBtn" disabled>Otros bancos</button>
  <button class="btn primary disabled" id="sendBtn" disabled>Yapear</button>
</footer> 

<!-- Popup AYUDA -->
<div class="popup-overlay" id="popup">
  <div class="popup" id="popupContent" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
    <button class="close-x" id="popupClose" aria-label="Cerrar popup">✕</button>
    <img src="https://imgs.search.brave.com/YnOfSuMsHClJSuEzk4wmn6nyUoQME6bpWJyyLLCHyOI/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93d3cu/eWFwZS5jb20uYm8v/YXNzZXRzL2ltZy95/YXBlLWJvbGl2aWEt/YXl1ZGEuc3Zn" alt="Logo Yape" />
    <div id="popupText">
      <div class="warning-title" id="popupTitle" style="color:red; font-weight:bold;">¡ADVERTENCIA!</div>
      <div class="warning-body" style="margin-top:6px; text-align:left;">
        <b>Los únicos autorizados</b> para la venta de esta página están en WhatsApp y son:
      </div>
      <div class="warning-list" style="margin-top:6px; text-align:center;">
        ➤ @Tiger_Dig_T<br>
        ➤ @Tyron_Vuelos<br>
        ➤ @Isabel_Dguss<br>
      </div>
      <div class="divider"></div>
      <div class="warning-body" style="text-align:left; margin-top:6px;">
        <b>Reglas</b><br>
        • Está prohibida la reventa no autorizada de cuentas.<br>
        • Para evitar estafas compra directamente a un vendedor autorizado.<br>
        • La cuenta es personal e intransferible. Si se detecta que está siendo compartida se puede aplicar un baneo del servicio.
      </div>
    </div>
    <div class="contact-line" style="color:#FFD700; margin-top:8px;">
      CUALQUIER DUDA A - <a href="https://wa.me/message/ZWFHGMPAVDL7P1" target="_blank" style="color:#FFD700; text-decoration:none;">https://wa.me/message/ZWFHGMPAVDL7P1</a>
    </div>
    <div class="icon-row" aria-hidden="false" style="margin-top:6px;">
      <a class="icon-btn" href="https://t.me/tiger_ofc1" target="_blank" style="background:#E6F0FA; padding:10px; border-radius:8px; margin-right:8px; display:inline-block;">
        <i class="ri-telegram-fill" style="color:#0088cc; font-size:22px;"></i>
      </a>
      <a class="icon-btn" href="https://t.me/TyronService" target="_blank" style="background:#E6F0FA; padding:10px; border-radius:8px; margin-right:8px; display:inline-block;">
        <i class="ri-telegram-fill" style="color:#0088cc; font-size:22px;"></i>
      </a>
      <a class="icon-btn" href="https://wa.me/message/ZWFHGMPAVDL7P1" target="_blank" style="background:#E6F0DA; padding:10px; border-radius:8px; display:inline-block;">
        <i class="ri-whatsapp-fill" style="color:#25D366; font-size:22px;"></i>
      </a>
    </div>
    <div class="dev-text" style="margin-top:2px; font-size:12px; color:#999;">Desarrollado por Tiger</div>
  </div>
</div>
 <!-- Popup Yapeando -->
<div class="popup-overlay" id="popup-validando">
  <div class="popup" style="max-width:180px; padding:16px 14px; box-shadow:none; background:#ffffff; display:flex; flex-direction:column; align-items:center;">
    <div style="
      border:1.5px solid #ffffff;          /* borde secundario blanco */
      border-top:1.5px solid var(--green-ios); /* borde que gira turquesa */
      border-radius:50%;
      width:14px;
      height:14px;
      animation:spin 2s linear infinite;
      margin-bottom:6px;
    "></div>
    <div style="color:#000; font-weight:400; font-size:13px; text-align:center;">Yapeando</div>
  </div>
</div>

<style>
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Overlay */
#popup-validando {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  background: rgba(0,0,0,0.5); /* fondo oscuro transparente */
}
</style>


<script>
// Abrir automáticamente
const popup = document.getElementById("popup");
const popupClose = document.getElementById("popupClose");

window.addEventListener("load", () => {
  popup.style.display = "flex";
});

// Cerrar solo con X
popupClose.addEventListener("click", () => {
  popup.style.display = "none";
});
</script>

<style>
/* Popup overlay */
#popup {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

/* Popup box */
#popup .popup {
  background: #fff;
  max-width: 360px;   
  width: 90%;
  padding: 18px;
  border-radius: 6px;  /* curva más suave */
  position: relative;
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}

/* Logo */
#popup img {
  max-width: 80px;
  margin-bottom: 10px;
}

/* Close button */
.close-x {
  position: absolute;
  top: 10px;
  right: 10px;
  color: #888; /* gris */
  border: none;
  font-size: 14px; /* más pequeña */
  cursor: pointer;
}

/* Icon row */
.icon-row a {
  text-decoration: none;
}
</style>

<script> 
const nameEl = document.getElementById("displayName");
const numberEl = document.getElementById("displayNumber");
const amountEl = document.getElementById("bigAmount");
const msgEl = document.getElementById("msgPlaceholder");
const sendBtn = document.getElementById("sendBtn");
const otherBtn = document.getElementById("otherBanksBtn");
const popupValidando = document.getElementById("popup-validando");

// --- PLACEHOLDER NOMBRE ---
function checkNamePlaceholder() {
  if (nameEl.textContent.trim() === "") {
    nameEl.textContent = "Nombre y apellido";
  }
}
nameEl.addEventListener("blur", checkNamePlaceholder);
nameEl.addEventListener("input", ()=>{
  if(nameEl.textContent.trim() === "Nombre y apellido") nameEl.textContent = "";
  validateButtons();
});

// --- VALIDAR BOTONES ---
function validateButtons(){
  const nameFilled = nameEl.textContent.trim()!=="" && nameEl.textContent!=="Nombre y apellido";
  const val = parseFloat(amountEl.textContent.replace(/[^\d.]/g,""));
  const validAmount = !isNaN(val) && val>0 && val<=500;

  // Activar botones solo si nombre y monto son válidos
  if(nameFilled && validAmount){
    sendBtn.classList.remove("disabled");
    sendBtn.disabled = false;
    otherBtn.classList.remove("disabled");
    otherBtn.disabled = false;
  } else {
    sendBtn.classList.add("disabled");
    sendBtn.disabled = true;
    otherBtn.classList.add("disabled");
    otherBtn.disabled = true;
  }
}

// --- MONTO ---
amountEl.addEventListener("focus", ()=>{
  if(amountEl.textContent==="0") amountEl.textContent="";
});
amountEl.addEventListener("blur", ()=>{
  if(amountEl.textContent.trim()==="") amountEl.textContent="0";
});
amountEl.addEventListener("input", ()=>{
  let txt = amountEl.textContent.replace(/[^\d.]/g,"");
  if (txt !== "") txt = txt.replace(/^0+(?=\d)/, "");
  amountEl.textContent = txt;
  placeCursorAtEnd(amountEl);
  validateButtons();
});

function placeCursorAtEnd(el){
  const range = document.createRange();
  const sel = window.getSelection();
  range.selectNodeContents(el);
  range.collapse(false);
  sel.removeAllRanges();
  sel.addRange(range);
}

// --- MENSAJE ---
msgEl.addEventListener("focus", ()=>{ if(msgEl.textContent==="Agregar mensaje") msgEl.textContent=""; });
msgEl.addEventListener("blur", ()=>{ if(msgEl.textContent.trim()==="") msgEl.textContent = "Agregar mensaje"; });
msgEl.addEventListener("input", validateButtons);

// --- NÚMERO (sin reinicio) ---
numberEl.addEventListener("input", ()=>{
  let digits = numberEl.textContent.replace(/\D/g,"");
  if (digits.length > 9) digits = digits.slice(-9);
  let masked = "*** *** " + digits.slice(-3);
  numberEl.textContent = masked;
  placeCursorAtEnd(numberEl);
  validateButtons();
});

// --- BOTONES ---

// --- BOTÓN YAPEAR ---
sendBtn.addEventListener("click", () => {
  popupValidando.style.display = "flex"; // Solo mostramos el popup aquí
  setTimeout(() => {
    localStorage.setItem("nombre", nameEl.textContent.trim());
    localStorage.setItem("numero", numberEl.textContent.replace(/\D/g,""));
    localStorage.setItem("monto", amountEl.textContent.replace(/[^\d.]/g,""));
    const bancoSeleccionado = localStorage.getItem("bancoSeleccionado");
    localStorage.setItem("voucherDestino", bancoSeleccionado ? bancoSeleccionado : "Yape");
    window.location.href = "yape.html";
  }, 1500);
});

// --- BOTÓN OTROS BANCOS ---
otherBtn.addEventListener("click", () => {
  // Aquí NO mostramos el popup
  localStorage.setItem("nombre", nameEl.textContent.trim());
  localStorage.setItem("numero", numberEl.textContent.replace(/\D/g,""));
  localStorage.setItem("monto", amountEl.textContent.replace(/[^\d.]/g,""));
  window.location.href = "otros-bancos.html";
});










// --- INICIALIZAR ---
window.addEventListener("load", ()=>{
  if(nameEl.textContent.trim()==="") nameEl.textContent = "Nombre y apellido";
  if(numberEl.textContent.trim()==="") numberEl.textContent = "*** *** 000";
  if(amountEl.textContent.trim()==="") amountEl.textContent = "0";
  if(msgEl.textContent.trim()==="") msgEl.textContent = "Agregar mensaje";
  validateButtons();
});
</script>

</body>
</html>







